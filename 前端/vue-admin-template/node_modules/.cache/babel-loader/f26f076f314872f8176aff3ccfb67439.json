{"remainingRequest":"E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\src\\views\\edu\\teacher\\form.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\src\\views\\edu\\teacher\\form.vue","mtime":1663144453461},{"path":"E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663144320549},{"path":"E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1663144313974},{"path":"E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663144320549},{"path":"E:\\demo\\谷粒课堂\\前端\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1663144446438}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovZGVtby9cdThDMzdcdTdDOTJcdThCRkVcdTU4MDIvXHU1MjREXHU3QUVGL3Z1ZS1hZG1pbi10ZW1wbGF0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB0ZWFjaGVyIGZyb20gIkAvYXBpL2VkdS90ZWFjaGVyIjsKaW1wb3J0IEltYWdlQ3JvcHBlciBmcm9tICJAL2NvbXBvbmVudHMvSW1hZ2VDcm9wcGVyIjsKaW1wb3J0IFBhblRodW1iIGZyb20gIkAvY29tcG9uZW50cy9QYW5UaHVtYiI7CnZhciBkZWZhdWx0Rm9ybSA9IHsKICBuYW1lOiAiIiwKICBzb3J0OiAwLAogIGxldmVsOiAiIiwKICBjYXJlZXI6ICIiLAogIGludHJvOiAiIiwKICBhdmF0YXI6ICIiCn07CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGVhY2hlcjogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHNvcnQ6IDAsCiAgICAgICAgbGV2ZWw6IDEsCiAgICAgICAgY2FyZWVyOiAiIiwKICAgICAgICBpbnRybzogIiIsCiAgICAgICAgYXZhdGFyOiBwcm9jZXNzLmVudi5PU1NfUEFUSCArICIvVGVhY2hlckhlYWRQb3J0cmFpdC/pu5jorqTlpLTlg48uanBnIgogICAgICB9LAogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlLAogICAgICAvLyDkv53lrZjmjInpkq7mmK/lkKbnpoHnlKgsCiAgICAgIEJBU0VfQVBJOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogICAgICAvLyDmjqXlj6NBUEnlnLDlnYAKICAgICAgaW1hZ2Vjcm9wcGVyU2hvdzogZmFsc2UsCiAgICAgIC8vIOaYr+WQpuaYvuekuuS4iuS8oOe7hOS7tgogICAgICBpbWFnZWNyb3BwZXJLZXk6IDAgLy8g5LiK5Lyg57uE5Lu2aWQKCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgSW1hZ2VDcm9wcGVyOiBJbWFnZUNyb3BwZXIsCiAgICBQYW5UaHVtYjogUGFuVGh1bWIKICB9LAogIHdhdGNoOiB7CiAgICAkcm91dGU6IGZ1bmN0aW9uICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBjb25zb2xlLmxvZygid2F0Y2ggJHJvdXRlIik7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vY29uc29sZS5sb2coJ2NyZWF0ZWQnKQogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICB0aGlzLmZldGNoRGF0YUJ5SWQoaWQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOS9v+eUqOWvueixoeaLk+Wxlei/kOeul+espu+8jOaLt+i0neWvueixoe+8jOiAjOS4jeaYr+W8leeUqO+8jAogICAgICAgIC8vIOWQpuWImeaWsOWinuS4gOadoeiusOW9leWQju+8jGRlZmF1bHRGb3Jt5bCx5Y+Y5oiQ5LqG5LmL5YmN5paw5aKe55qEdGVhY2hlcueahOWAvAogICAgICAgIHRoaXMudGVhY2hlciA9IF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRGb3JtKTsKICAgICAgfQogICAgfSwKICAgIC8vIOagueaNrmlk5p+l6K+i6K6w5b2VCiAgICBmZXRjaERhdGFCeUlkOiBmdW5jdGlvbiBmZXRjaERhdGFCeUlkKGlkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0ZWFjaGVyLmdldEJ5SWQoaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICBfdGhpcy50ZWFjaGVyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIG1lc3NhZ2U6ICLojrflj5bmlbDmja7lpLHotKUiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS/neWtmOaIluiAheS/ruaUuQogICAgc2F2ZU9yVXBkYXRlOiBmdW5jdGlvbiBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIHRoaXMuc2F2ZUJ0bkRpc2FibGVkID0gdHJ1ZTsKCiAgICAgIGlmICghdGhpcy50ZWFjaGVyLmlkKSB7CiAgICAgICAgdGhpcy5zYXZlRGF0YSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBkYXRlRGF0YSgpOwogICAgICB9CiAgICB9LAogICAgLy8g5L+d5a2YCiAgICBzYXZlRGF0YTogZnVuY3Rpb24gc2F2ZURhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codGhpcy50ZWFjaGVyKTsKICAgICAgdGVhY2hlci5zYXZlKHRoaXMudGVhY2hlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIG1lc3NhZ2U6ICLkv53lrZjmiJDlip8hIgogICAgICAgIH0pOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb3NuZSkgewogICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi9lZHUvdGVhY2hlciIKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBtZXNzYWdlOiAi5L+d5a2Y5aSx6LSlIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YTogZnVuY3Rpb24gdXBkYXRlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnNhdmVCdG5EaXNhYmxlZCA9IHRydWU7CiAgICAgIHRlYWNoZXIudXBkYXRlQnlJZCh0aGlzLnRlYWNoZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfISIKICAgICAgICB9KTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9zbmUpIHsKICAgICAgICBfdGhpczMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICIvZWR1L3RlYWNoZXIiCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgbWVzc2FnZTogIuS/neWtmOWksei0pSIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5LiK5Lyg5oiQ5Yqf5ZCO55qE5Zue6LCD5Ye95pWwCiAgICBjcm9wU3VjY2VzczogZnVuY3Rpb24gY3JvcFN1Y2Nlc3MoZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdGhpcy5pbWFnZWNyb3BwZXJTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMudGVhY2hlci5hdmF0YXIgPSBkYXRhLnVybDsgLy8g5LiK5Lyg5oiQ5Yqf5ZCO77yM6YeN5paw5omT5byA5LiK5Lyg57uE5Lu25pe25Yid5aeL5YyW57uE5Lu277yM5ZCm5YiZ5pi+56S65LiK5LiA5qyh55qE5LiK5Lyg57uT5p6cCgogICAgICB0aGlzLmltYWdlY3JvcHBlcktleSA9IHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ICsgMTsKICAgIH0sCiAgICAvLyDlhbPpl63kuIrkvKDnu4Tku7YKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy5pbWFnZWNyb3BwZXJTaG93ID0gZmFsc2U7IC8vIOS4iuS8oOWksei0peWQju+8jOmHjeaWsOaJk+W8gOS4iuS8oOe7hOS7tuaXtuWIneWni+WMlue7hOS7tu+8jOWQpuWImeaYvuekuuS4iuS4gOasoeeahOS4iuS8oOe7k+aenAoKICAgICAgdGhpcy5pbWFnZWNyb3BwZXJLZXkgPSB0aGlzLmltYWdlY3JvcHBlcktleSArIDE7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":"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","sourcesContent":["\r\n<template>\r\n  <div class=\"app-container\">\r\n    <el-form label-width=\"120px\">\r\n      <el-form-item label=\"讲师名称\">\r\n        <el-input v-model=\"teacher.name\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"讲师排序\">\r\n        <el-input-number\r\n          v-model=\"teacher.sort\"\r\n          controls-position=\"right\"\r\n          :min=\"0\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"讲师头衔\">\r\n        <el-select v-model=\"teacher.level\" clearable placeholder=\"请选择\">\r\n          <!--\r\n            数据类型一定要和取出的json中的一致，否则没法回填\r\n            因此，这里value使用动态绑定的值，保证其数据类型是number\r\n          -->\r\n          <el-option :value=\"1\" label=\"高级讲师\" />\r\n          <el-option :value=\"2\" label=\"首席讲师\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"讲师资历\">\r\n        <el-input v-model=\"teacher.career\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"讲师简介\">\r\n        <el-input v-model=\"teacher.intro\" :rows=\"10\" type=\"textarea\" />\r\n      </el-form-item>\r\n\r\n      <!-- 讲师头像 -->\r\n      <el-form-item label=\"讲师头像\">\r\n        <!-- 头衔缩略图 -->\r\n        <pan-thumb :image=\"teacher.avatar\" />\r\n        <!-- 文件上传按钮 -->\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-upload\"\r\n          @click=\"imagecropperShow = true\"\r\n          >更换头像\r\n        </el-button>\r\n        <!--\r\n        v-show：是否显示上传组件\r\n        :key：类似于id，如果一个页面多个图片上传控件，可以做区分\r\n        :url：后台上传的url地址\r\n        @close：关闭上传组件\r\n        @crop-upload-success：上传成功后的回调 -->\r\n        <image-cropper\r\n          v-show=\"imagecropperShow\"\r\n          :width=\"300\"\r\n          :height=\"300\"\r\n          :key=\"imagecropperKey\"\r\n          :url=\"BASE_API + '/eduoss/fileupload/upload'\"\r\n          field=\"file\"\r\n          @close=\"close\"\r\n          @crop-upload-success=\"cropSuccess\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"saveOrUpdate\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport teacher from \"@/api/edu/teacher\";\r\nimport ImageCropper from \"@/components/ImageCropper\";\r\nimport PanThumb from \"@/components/PanThumb\";\r\n\r\nconst defaultForm = {\r\n  name: \"\",\r\n  sort: 0,\r\n  level: \"\",\r\n  career: \"\",\r\n  intro: \"\",\r\n  avatar: \"\",\r\n};\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      teacher: {\r\n        name: \"\",\r\n        sort: 0,\r\n        level: 1,\r\n        career: \"\",\r\n        intro: \"\",\r\n        avatar: process.env.OSS_PATH + \"/TeacherHeadPortrait/默认头像.jpg\",\r\n      },\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      BASE_API: process.env.VUE_APP_BASE_API, // 接口API地址\r\n      imagecropperShow: false, // 是否显示上传组件\r\n      imagecropperKey: 0, // 上传组件id\r\n    };\r\n  },\r\n  components: {\r\n    ImageCropper: ImageCropper,\r\n    PanThumb: PanThumb,\r\n  },\r\n\r\n  watch: {\r\n    $route(to, from) {\r\n      console.log(\"watch $route\");\r\n      this.init();\r\n    },\r\n  },\r\n\r\n  created() {\r\n    //console.log('created')\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    init() {\r\n      if (this.$route.params && this.$route.params.id) {\r\n        const id = this.$route.params.id;\r\n        this.fetchDataById(id);\r\n      } else {\r\n        // 使用对象拓展运算符，拷贝对象，而不是引用，\r\n        // 否则新增一条记录后，defaultForm就变成了之前新增的teacher的值\r\n        this.teacher = { ...defaultForm };\r\n      }\r\n    },\r\n\r\n    // 根据id查询记录\r\n    fetchDataById(id) {\r\n      teacher\r\n        .getById(id)\r\n        .then((response) => {\r\n          //console.log(response.data);\r\n          this.teacher = response.data;\r\n        })\r\n        .catch((response) => {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"获取数据失败\",\r\n          });\r\n        });\r\n    },\r\n\r\n    // 保存或者修改\r\n    saveOrUpdate() {\r\n      this.saveBtnDisabled = true;\r\n      if (!this.teacher.id) {\r\n        this.saveData();\r\n      } else {\r\n        this.updateData();\r\n      }\r\n    },\r\n\r\n    // 保存\r\n    saveData() {\r\n      console.log(this.teacher);\r\n      teacher\r\n        .save(this.teacher)\r\n        .then((response) => {\r\n          return this.$message({\r\n            type: \"success\",\r\n            message: \"保存成功!\",\r\n          });\r\n        })\r\n        .then((resposne) => {\r\n          this.$router.push({ path: \"/edu/teacher\" });\r\n        })\r\n        .catch((response) => {\r\n          // console.log(response)\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"保存失败\",\r\n          });\r\n        });\r\n    },\r\n\r\n    // 根据id更新记录\r\n    updateData() {\r\n      this.saveBtnDisabled = true;\r\n      teacher\r\n        .updateById(this.teacher)\r\n        .then((response) => {\r\n          return this.$message({\r\n            type: \"success\",\r\n            message: \"修改成功!\",\r\n          });\r\n        })\r\n        .then((resposne) => {\r\n          this.$router.push({ path: \"/edu/teacher\" });\r\n        })\r\n        .catch((response) => {\r\n          // console.log(response)\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"保存失败\",\r\n          });\r\n        });\r\n    },\r\n\r\n    // 上传成功后的回调函数\r\n    cropSuccess(data) {\r\n      // console.log(data);\r\n      this.imagecropperShow = false;\r\n      this.teacher.avatar = data.url;\r\n      // 上传成功后，重新打开上传组件时初始化组件，否则显示上一次的上传结果\r\n      this.imagecropperKey = this.imagecropperKey + 1;\r\n    },\r\n\r\n    // 关闭上传组件\r\n    close() {\r\n      this.imagecropperShow = false;\r\n      // 上传失败后，重新打开上传组件时初始化组件，否则显示上一次的上传结果\r\n      this.imagecropperKey = this.imagecropperKey + 1;\r\n    },\r\n  },\r\n};\r\n</script>"],"sourceRoot":"src/views/edu/teacher"}]}